(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),c=n.n(r),s=(n(19),n(2)),l=n(3),u=n.n(l),i=function(){return console.log(u.a.get("http://localhost:3001/api/persons")),u.a.get("http://localhost:3001/api/persons")},m=function(e){u.a.delete("http://localhost:3001/api/persons/".concat(e))},d=function(e){var t=e.newPersonObject;return u.a.post("http://localhost:3001/api/persons",t)},f=function(e){var t=e.changedPerson;return u.a.put("http://localhost:3001/api/persons/".concat(t.id),t)},p=function(e){var t=e.persons,n=e.setPersons,a=e.newName,r=e.setNewName,c=e.newNumber,s=e.setNewNumber,l=e.setMessage,u=e.setErrorMessage;return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("button clicked");var o={name:a,number:c},i=t.find((function(e){return e.name===a}));i?window.confirm("".concat(a," is already added to the phonebook, replace the old number with new one?"))&&(i.number=c,console.log(i),f({changedPerson:i}).then(n(t.map((function(e){return e.id!==i.id?e:i})))).catch((function(e){u("".concat(a," has already been removed from the server")),setTimeout((function(){u(null)}),3e3)})),r(""),s("")):d({newPersonObject:o}).then((function(e){n(t.concat(e.data)),console.log(e.data),r(""),s(""),console.log(t),console.log(e),l("added ".concat(a)),setTimeout((function(){l(null)}),3e3)})).catch((function(e){console.log(e.response.data),u("".concat(e.response.data.error)),setTimeout((function(){u(null)}),3e3)}))}},o.a.createElement("div",null," name: ",o.a.createElement("input",{value:a,onChange:function(e){r(e.target.value)}})," "),o.a.createElement("div",null," Number: ",o.a.createElement("input",{value:c,onChange:function(e){s(e.target.value)}})," "),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},h=function(e){var t=e.persons,n=e.setNewSearch;return o.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},o.a.createElement("div",null,"search:",o.a.createElement("input",{onChange:function(e){n(t.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())})))}})))},b=function(e){var t=e.person,n=e.setPersons,a=e.persons;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){console.log("button clicked",t),window.confirm("delete ".concat(t.name,"?"))&&(m(t.id),n(a.filter((function(e){return e.id!==t.id}))))}},"delete"))},E=function(e){var t=e.persons,n=e.setPersons,a=t.map((function(e){return o.a.createElement("li",{key:e.id},e.name," ",e.number," ",o.a.createElement(b,{person:e,setPersons:n,persons:t}))}));return o.a.createElement("div",null,a)},g=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"success"},t)},v=function(e){var t=e.errorMessage;return null===t?null:o.a.createElement("div",{className:"error"},t)},w=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),u=l[0],m=l[1],d=Object(a.useState)(""),f=Object(s.a)(d,2),b=f[0],w=f[1],N=Object(a.useState)([]),j=Object(s.a)(N,2),O=j[0],S=j[1],P=Object(a.useState)(null),k=Object(s.a)(P,2),M=k[0],y=k[1],C=Object(a.useState)(null),T=Object(s.a)(C,2),B=T[0],D=T[1];return Object(a.useEffect)((function(){i().then((function(e){r(e.data)}))}),[]),Object(a.useEffect)((function(){S(n)}),[n]),o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(v,{errorMessage:M})," ",o.a.createElement(g,{message:B}),o.a.createElement(h,{persons:n,setNewSearch:S}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(p,{persons:n,setPersons:r,newName:u,setNewName:m,newNumber:b,setNewNumber:w,setMessage:D,setErrorMessage:y}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(E,{persons:O,setPersons:r,setNewSearch:S}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.59958c65.chunk.js.map